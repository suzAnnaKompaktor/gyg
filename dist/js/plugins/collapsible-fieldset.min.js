(function(a,b){a=a||{};var c=function(a,b){return this.init(a,b)};c.DEFAULTS={legendSelector:"> legend .fieldset-legend",wrapperSelector:"> .fieldset-wrapper",linkSelector:'<a class="fieldset-title" href="#"></a>',iconSelector:"> legend i",iconCollapsed:"icon-caret-right",iconExpanded:"icon-caret-down"},c.prototype={init:function(a,c){return this.$fieldset=a,this.setOptions(),this.$wrapper=this.$fieldset.find(this.options.wrapperSelector),this.$legend=this.$fieldset.find(this.options.legendSelector),this.$link=b(this.options.linkSelector).prepend(this.$legend.contents()).appendTo(this.$legend),console.log(b(this.options.linkSelector)),this.events(),this},setOptions:function(a){return this.options=b.extend(!0,{},c.DEFAULTS,a),this},build:function(){return this},events:function(){var a=this;this.$link.click(function(){return a.$fieldset.animating||(a.$fieldset.animating=!0,a.toggleCollapse()),!1})},toggleCollapse:function(){var a=this;if(this.$fieldset.is(".collapsed")){var b=this.$wrapper.hide();this.$fieldset.removeClass("collapsed").trigger({type:"collapsed",value:!1}).find(this.options.iconSelector).removeClass(this.options.iconCollapsed).addClass(this.options.iconExpanded),b.slideDown({duration:"fast",easing:"linear",complete:function(){a.$fieldset.animating=!1}})}else this.$fieldset.trigger({type:"collapsed",value:!0}),this.$wrapper.slideUp("fast",function(){a.$fieldset.addClass("collapsed").find(a.options.iconSelector).removeClass(a.options.iconExpanded).addClass(a.options.iconCollapsed),a.$fieldset.animating=!1})}},b.extend(a,{CollapsibleFieldset:c}),b.fn.clCollapsibleFieldset=function(a){return this.map(function(){var d=b(this);new c(d,a)})}}).apply(this,[window.theme,jQuery]);